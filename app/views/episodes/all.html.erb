<div class="row-fluid">
  <div class="span10" id="episodes">
      <% for episode in @episodes %>
        <%= render episode %>
      <% end %>
  </div>
</div>

<div class="all_pagination">
  <%= will_paginate @episodes %>
</div>

<% content_for :template_js do %>
  <script>
    $(function() {
      if ($('.pagination').length) {
        $(window).scroll(function() {
          var url;
          url = $('.pagination .next_page').attr('href');
          if (url && $(window).scrollTop() > $(document).height() - $(window).height() - 50) {
            $('.pagination').text("Fetching more episodes...");
            $('.all_pagination').css('display', 'block')
            return $.getScript(url);
          }
        });
        return $(window).scroll();
      }
    });
  </script>
<% end %>
